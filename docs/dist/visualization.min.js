if(typeof brainite!="object"){var brainite={}}brainite.visualization={map:{status:0,instances:{},load:function(b,a){if(this.status==2){a(b)}else{this.instances[b]=a;if(this.status==0){this.status=1;brainite.loadjs("https://maps.googleapis.com/maps/api/js?callback=brainite.visualization.map.ready","google-maps-jsapi")}}},ready:function(b){for(var a in this.instances){this.instances[a](a)}}}};brainite.loadjs=function(a,g){var f=document,b="script";var e,c=f.getElementsByTagName(b)[0];if(f.getElementById(g)){return}e=f.createElement(b);e.id=g;e.src=a;c.parentNode.insertBefore(e,c)};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")}}(function($){var _uniq_id=0;var i,j,k,v,row;function uniq_id(){_uniq_id++;return"html5-gv-id-"+_uniq_id}var _loaders={Table:{type:"google",packages:["table"]},"google.visualization.Table":{type:"google",packages:["table"]},};var _map={type:"chartType"};$("axisTitlesPosition backgroundColor chartArea enableInteractivity fontSize fontName gridlineColor hAxis isStacked legendTextStyle logScale maxAlternation maxValue minValue reverseCategories showTextEvery slantedText slantedTextAngle strokeWidth textPosition textStyle titlePosition titleTextStyle tooltipTextStyle vAxes vAxis viewWindowMode viewWindow".split(" ")).each(function(){_map[this.toLowerCase()]=this});var _html5load_detect_recurse=false;function html5load(){$(this).each(function(){var chart_element=this;$(this).attr("data-gv-applied","true");$(this).change(function(){$(this).removeAttr("data-gv-applied")});if(!this.id){this.id=uniq_id()}var cfg={chartType:"Table",dataTable:null,options:{}};if($(this).width()/$(this).height()>20){$(this).height(250)}for(i=0;i<this.attributes.length;i++){k=this.attributes[i].name.toLowerCase();v=this.attributes[i].value;if(k.indexOf("_")!=-1){var k1=k.substr(k.indexOf("_")+1);k=k.substr(0,k.indexOf("_"));if(k1=="csv"){var v1=[];while(v.indexOf(",")!=-1){var tmp=v.substr(0,v.indexOf(","));v=v.substr(tmp.length+1);v1.push(tmp)}if(v!=""){v1.push(v)}v=v1}else{if(k1=="json"){if(v.indexOf('"')==-1&&v.indexOf("'")!=-1){v=v.replace(/'/g,'"')}v=$.parseJSON(v)}}}if(k.substr(0,8)=="data-gv-"){k=k.substr(8);if(typeof _map[k]!="undefined"){k=_map[k]}if(typeof cfg[k]=="undefined"){tgt=cfg.options}else{tgt=cfg}while(k.indexOf(".")!=-1){var k1=k.substr(0,k.indexOf("."));if(typeof _map[k1]!="undefined"){k1=_map[k1]}k=k.substr(k1.length+1);if(typeof tgt[k1]=="undefined"){tgt[k1]={}}tgt=tgt[k1]}if(typeof _map[k]!="undefined"){k=_map[k]}tgt[k]=v}}var wrap_ready=function(){};var dt=new google.visualization.DataTable();var table=null;cfg.dataTable=dt;if($("table:has(tbody):not(.google-visualization-table-table)",this).length==1){table=$("table:has(tbody):not(.sticky-header)",this).removeClass("sticky-table sticky-enabled");$("caption:first",table).each(function(){cfg.options.title=$(this).text().trim()});table.insertAfter(this).hide();$("table.sticky-header",this).remove();dt_load_table(dt,table,this,cfg.options)}else{if($(this).eq(0).attr("data-gv-datatable")){table=document.getElementById($(this).eq(0).attr("data-gv-datatable"));if(table){dt_load_table(dt,table,this,cfg.options);if(cfg.chartType=="Table"){$(table).hide()}else{if(cfg.options.datatablehide){$(table).hide()}}}}else{return}}$(this).data("gv-datatable-object",dt);if(cfg.chartType=="X-MapMarkers"){var load_markers=function(id){v={title:null,lat:null,lon:null};for(j=dt.getNumberOfColumns()-1;j>=0;j--){k=dt.getColumnLabel(j).toLowerCase();if(k=="title"){v.title=j}else{if(k=="lat"||k=="latitude"){v.lat=j}else{if(k=="lon"||k=="longitude"){v.lon=j}}}}if(v.lat===null){$(this).before("<p>ERROR: No Latitude column found</p>");return}if(v.lon===null){$(this).before("<p>ERROR: No Longitude column found</p>");return}var center=new google.maps.LatLng(37.09024,-95.712891);var map=new google.maps.Map(document.getElementById(id),{zoom:3,center:center,mapTypeId:google.maps.MapTypeId.ROADMAP});var marker;var marker_bounds=new google.maps.LatLngBounds();for(i=dt.getNumberOfRows()-1;i>=0;i--){row={lat:dt.getValue(i,v.lat),lon:dt.getValue(i,v.lon),title:(v.title===null?null:dt.getValue(i,v.title))};marker=new google.maps.Marker({position:new google.maps.LatLng(row.lat,row.lon),map:map,title:""+row.title});marker_bounds.extend(new google.maps.LatLng(marker.position.lat(),marker.position.lng()))}var $map=$("#"+id);if($map.height()<200){$map.height(400)}map.fitBounds(marker_bounds);map.panToBounds(marker_bounds)};brainite.visualization.map.load(this.id,load_markers);return}if(cfg.chartType=="X-MapMarkerCluster"){var load_markercluster=function(id){v={cnt:null,lat:null,lon:null};for(j=dt.getNumberOfColumns()-1;j>=0;j--){k=dt.getColumnLabel(j).toLowerCase();if(k=="count"){v.cnt=j}else{if(k=="lat"||k=="latitude"){v.lat=j}else{if(k=="lon"||k=="longitude"){v.lon=j}}}}if(v.lat===null){$(this).before("<p>ERROR: No Latitude column found</p>");return}if(v.lon===null){$(this).before("<p>ERROR: No Longitude column found</p>");return}var markers=[],marker;var marker_bounds=new google.maps.LatLngBounds();for(i=dt.getNumberOfRows()-1;i>=0;i--){row={lat:dt.getValue(i,v.lat),lon:dt.getValue(i,v.lon),cnt:(v.cnt===null?1:dt.getValue(i,v.cnt))};marker=new google.maps.Marker({position:new google.maps.LatLng(row.lat,row.lon),title:""+row.cnt});markers.push(marker);marker_bounds.extend(new google.maps.LatLng(marker.position.lat(),marker.position.lng()))}var $map=$("#"+id);if($map.height()<200){$map.height(400)}var center=new google.maps.LatLng(37.09024,-95.712891);var map=new google.maps.Map(document.getElementById(id),{zoom:3,center:center,mapTypeId:google.maps.MapTypeId.ROADMAP});var options={imagePath:"https://www.brainite.ws/wcdn/l/lib/visualization/dist/images/m",minimumClusterSize:1};var markerCluster=new MarkerClusterer(map,markers,options);map.fitBounds(marker_bounds);map.panToBounds(marker_bounds)};brainite.visualization.map.load(this.id,load_markercluster);return}if(cfg.options.image=="true"||cfg.options.image=="print"){if(typeof canvg!="function"){$.getScript("//gabelerner.github.io/canvg/rgbcolor.js");$.getScript("//gabelerner.github.io/canvg/StackBlur.js");$.getScript("//gabelerner.github.io/canvg/canvg.js")}var $vis=$(this);wrap_ready=function(){if(typeof canvg!="function"||typeof RGBColor!="function"){setTimeout(wrap_ready,500);return}var m=(cfg.options.image=="print")?4:1;var c=$('<canvas style="display:none;">').attr("id",this.id+"-canvas");c.width($vis.width()*m).height($vis.height()*m);$vis.after(c);var svg=$vis.gv_svg(0);var f=function(s,attr){var r="",part=[];var parts=s.split(" "+attr+'="');if(parts.length==1||m==1){return s}r=parts.shift();while(parts.length!=0){r+=" "+attr+'="';part=parts.shift().split('"');r+=part.shift()*m;r+='"'+part.join('"')}return r};var fd=function(s){var r="",part=[],c="",tmp="";var parts=s.split(' d="M');if(parts.length==1||m==1){return s}r=parts.shift();while(parts.length!=0){r+=' d="M';part=parts.shift();while(part.length!=0){c=part.charAt(0);part=part.substr(1);if(c=='"'){r+=(tmp*m)+c+part;break}if("-0123456789.".indexOf(c)==-1){r+=(tmp*m)+c;tmp=""}else{tmp+=c}}}return r};svg=f(f(f(f(svg,"x"),"y"),"width"),"height");svg=f(f(svg,"font-size"),"stroke-width");svg=fd(svg);canvg(this.id+"-canvas",svg);c.width(c.width()*m).height(c.height()*m);var im=$("<img>").attr("src",$("#"+this.id+"-canvas")[0].toDataURL("image/png"));im.width($vis.width()).height($vis.height());$vis.html(im);c.remove()}}var draw_wrapper=function(){var wrap=new google.visualization.ChartWrapper(cfg);google.visualization.events.addListener(wrap,"ready",wrap_ready);wrap.draw($(chart_element)[0]);$(chart_element).data("gv_wrapper",wrap)};if(typeof _loaders[cfg.chartType]!="undefined"&&eval("with (google.visualization) {typeof "+cfg.chartType+";}")=="undefined"){if(_loaders[cfg.chartType].type=="google"){google.load("visualization","1",{packages:_loaders[cfg.chartType].packages,callback:draw_wrapper})}}else{draw_wrapper()}})}function dt_load_table(dt,table,$log,options){function myIsNaN(n){if(!isNaN(n)){return false}return !(/^-?[0-9]+(,[0-9]{3})+(\.[0-9]+)?$/m).test(n)}if(options.datatablerotate){var colIndex=0;var colType="string";$("tr",table).each(function(){var rowIndex=-1;$(this).children("td,th").each(function(ix){var cell=$(this);if(rowIndex==-1){var firstData=cell.next("td,th");if(firstData.is("th")||myIsNaN(firstData.text().trim())){colType="string"}else{colType="number"}dt.addColumn(colType,$(this).text().trim())}else{var t=cell.text().trim();if(t==""){t=null}else{switch(colType){case"number":t=1*t.replace(/[, ]/g,"");break;default:break}}if(colIndex==0){dt.addRow([t])}else{dt.setCell(rowIndex,colIndex,t)}}rowIndex++});colIndex++})}else{$("thead tr",table).children("td,th").each(function(ix){var cell=$("tbody tr:first",table).children("td,th").eq(ix);if(cell.is("th")||myIsNaN(cell.text().trim())){dt.addColumn("string",$(this).text().trim())}else{dt.addColumn("number",$(this).text().trim())}});$("tbody tr",table).each(function(){var row=[];$("th,td",this).each(function(){var t=$(this).text().trim();if(t==""){row.push(null)}else{switch(dt.getColumnType(row.length)){case"number":row.push(1*t.replace(/[, ]/g,""));break;default:row.push(t);break}}});dt.addRow(row)})}}$.fn.gv=function(k,v){$(this).attr("data-gv-"+k,v).removeAttr("data-gv-applied").change()};$.fn.gv_edit=function(){var target_chart=$(this)[0];var wrapper=$(this).eq(0).data("gv_wrapper");google.load("visualization","1",{packages:["charteditor"],callback:function(){var editor=new google.visualization.ChartEditor();google.visualization.events.addListener(editor,"ok",function(){wrapper=editor.getChartWrapper();wrapper.draw(target_chart)});editor.openDialog(wrapper)}})};$.fn.gv_svg=function(open_window){var h="";try{h=$(this).find("svg").eq(0).parent().html()}catch(e){h=$(this).eq(0).find("iframe").contents().find("body").html()+""}if(h.indexOf("<svg")==-1){alert("Sorry, but the export to SVG only works when viewing a chart.");return}h=h.substring(h.indexOf("<svg")+4,h.indexOf("</svg>")+6);h='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"'+h;if(open_window){h="data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(h);if(open_window&&open_window!=-1){window.open(h,"svg_"+$(this).eq(0).attr("id"))}}return h};$(document).ready(function(){var s="*[data-gv-type]:not([data-gv-applied])";if(typeof $.fn.on=="function"){$(document).on("change",s,html5load)}else{$(document).delegate(s,"change",html5load)}if(typeof google=="undefined"){var script=document.createElement("script");script.src="https://www.google.com/jsapi?callback=brainite_visualization_prereqs";script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script)}else{brainite_visualization_prereqs()}})})(jQuery);var brainite_visualization_prereqs=function(){google.load("visualization","1",{packages:["corechart"],callback:function(){jQuery("*[data-gv-type]").change()}})};function MarkerClusterer(e,a,d){this.extend(MarkerClusterer,google.maps.OverlayView);this.map_=e;this.markers_=[];this.clusters_=[];this.sizes=[53,56,66,78,90];this.styles_=[];this.ready_=false;var b=d||{};this.gridSize_=b.gridSize||60;this.minClusterSize_=b.minimumClusterSize||2;this.maxZoom_=b.maxZoom||null;this.styles_=b.styles||[];this.imagePath_=b.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_;this.imageExtension_=b.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_;this.zoomOnClick_=true;if(b.zoomOnClick!=undefined){this.zoomOnClick_=b.zoomOnClick}this.averageCenter_=false;if(b.averageCenter!=undefined){this.averageCenter_=b.averageCenter}this.setupStyles_();this.setMap(e);this.prevZoom_=this.map_.getZoom();var c=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var f=c.map_.getZoom();if(c.prevZoom_!=f){c.prevZoom_=f;c.resetViewport()}});google.maps.event.addListener(this.map_,"idle",function(){c.redraw()});if(a&&a.length){this.addMarkers(a,false)}}MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m";MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png";MarkerClusterer.prototype.extend=function(b,a){return(function(c){for(var d in c.prototype){this.prototype[d]=c.prototype[d]}return this}).apply(b,[a])};MarkerClusterer.prototype.onAdd=function(){this.setReady_(true)};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){if(this.styles_.length){return}for(var b=0,a;a=this.sizes[b];b++){this.styles_.push({url:this.imagePath_+(b+1)+"."+this.imageExtension_,height:a,width:a})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var d=this.getMarkers();var c=new google.maps.LatLngBounds();for(var b=0,a;a=d[b];b++){c.extend(a.getPosition())}this.map_.fitBounds(c)};MarkerClusterer.prototype.setStyles=function(a){this.styles_=a};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};MarkerClusterer.prototype.setMaxZoom=function(a){this.maxZoom_=a};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.calculator_=function(e,d){var a=0;var c=e.length;var b=c;while(b!==0){b=parseInt(b/10,10);a++}a=Math.min(a,d);return{text:c,index:a}};MarkerClusterer.prototype.setCalculator=function(a){this.calculator_=a};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.addMarkers=function(d,c){for(var b=0,a;a=d[b];b++){this.pushMarkerTo_(a)}if(!c){this.redraw()}};MarkerClusterer.prototype.pushMarkerTo_=function(a){a.isAdded=false;if(a.draggable){var b=this;google.maps.event.addListener(a,"dragend",function(){a.isAdded=false;b.repaint()})}this.markers_.push(a)};MarkerClusterer.prototype.addMarker=function(a,b){this.pushMarkerTo_(a);if(!b){this.redraw()}};MarkerClusterer.prototype.removeMarker_=function(b){var c=-1;if(this.markers_.indexOf){c=this.markers_.indexOf(b)}else{for(var d=0,a;a=this.markers_[d];d++){if(a==b){c=d;break}}}if(c==-1){return false}b.setMap(null);this.markers_.splice(c,1);return true};MarkerClusterer.prototype.removeMarker=function(a,b){var c=this.removeMarker_(a);if(!b&&c){this.resetViewport();this.redraw();return true}else{return false}};MarkerClusterer.prototype.removeMarkers=function(f,c){var e=false;for(var b=0,a;a=f[b];b++){var d=this.removeMarker_(a);e=e||d}if(!c&&e){this.resetViewport();this.redraw();return true}};MarkerClusterer.prototype.setReady_=function(a){if(!this.ready_){this.ready_=a;this.createClusters_()}};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.getMap=function(){return this.map_};MarkerClusterer.prototype.setMap=function(a){this.map_=a};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(a){this.gridSize_=a};MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinClusterSize=function(a){this.minClusterSize_=a};MarkerClusterer.prototype.getExtendedBounds=function(e){var c=this.getProjection();var f=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng());var h=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng());var d=c.fromLatLngToDivPixel(f);d.x+=this.gridSize_;d.y-=this.gridSize_;var b=c.fromLatLngToDivPixel(h);b.x-=this.gridSize_;b.y+=this.gridSize_;var g=c.fromDivPixelToLatLng(d);var a=c.fromDivPixelToLatLng(b);e.extend(g);e.extend(a);return e};MarkerClusterer.prototype.isMarkerInBounds_=function(a,b){return b.contains(a.getPosition())};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(true);this.markers_=[]};MarkerClusterer.prototype.resetViewport=function(d){for(var c=0,a;a=this.clusters_[c];c++){a.remove()}for(var c=0,b;b=this.markers_[c];c++){b.isAdded=false;if(d){b.setMap(null)}}this.clusters_=[]};MarkerClusterer.prototype.repaint=function(){var a=this.clusters_.slice();this.clusters_.length=0;this.resetViewport();this.redraw();window.setTimeout(function(){for(var c=0,b;b=a[c];c++){b.remove()}},0)};MarkerClusterer.prototype.redraw=function(){this.createClusters_()};MarkerClusterer.prototype.distanceBetweenPoints_=function(j,h){if(!j||!h){return 0}var g=6371;var e=(h.lat()-j.lat())*Math.PI/180;var f=(h.lng()-j.lng())*Math.PI/180;var b=Math.sin(e/2)*Math.sin(e/2)+Math.cos(j.lat()*Math.PI/180)*Math.cos(h.lat()*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);var k=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));var i=g*k;return i};MarkerClusterer.prototype.addToClosestCluster_=function(c){var j=40000;var f=null;var h=c.getPosition();for(var e=0,b;b=this.clusters_[e];e++){var a=b.getCenter();if(a){var g=this.distanceBetweenPoints_(a,c.getPosition());if(g<j){j=g;f=b}}}if(f&&f.isMarkerInClusterBounds(c)){f.addMarker(c)}else{var b=new Cluster(this);b.addMarker(c);this.clusters_.push(b)}};MarkerClusterer.prototype.createClusters_=function(){if(!this.ready_){return}var b=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast());var d=this.getExtendedBounds(b);for(var c=0,a;a=this.markers_[c];c++){if(!a.isAdded&&this.isMarkerInBounds_(a,d)){this.addToClosestCluster_(a)}}};function Cluster(a){this.markerClusterer_=a;this.map_=a.getMap();this.gridSize_=a.getGridSize();this.minClusterSize_=a.getMinClusterSize();this.averageCenter_=a.isAverageCenter();this.center_=null;this.markers_=[];this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,a.getStyles(),a.getGridSize())}Cluster.prototype.isMarkerAlreadyAdded=function(b){if(this.markers_.indexOf){return this.markers_.indexOf(b)!=-1}else{for(var c=0,a;a=this.markers_[c];c++){if(a==b){return true}}}return false};Cluster.prototype.addMarker=function(c){if(this.isMarkerAlreadyAdded(c)){return false}if(!this.center_){this.center_=c.getPosition();this.calculateBounds_()}else{if(this.averageCenter_){var b=this.markers_.length+1;var f=(this.center_.lat()*(b-1)+c.getPosition().lat())/b;var d=(this.center_.lng()*(b-1)+c.getPosition().lng())/b;this.center_=new google.maps.LatLng(f,d);this.calculateBounds_()}}c.isAdded=true;this.markers_.push(c);var a=this.markers_.length;if(a<this.minClusterSize_&&c.getMap()!=this.map_){c.setMap(this.map_)}if(a==this.minClusterSize_){for(var e=0;e<a;e++){this.markers_[e].setMap(null)}}if(a>=this.minClusterSize_){c.setMap(null)}this.updateIcon();return true};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var c=new google.maps.LatLngBounds(this.center_,this.center_);var d=this.getMarkers();for(var b=0,a;a=d[b];b++){c.extend(a.getPosition())}return c};Cluster.prototype.remove=function(){this.clusterIcon_.remove();this.markers_.length=0;delete this.markers_};Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)};Cluster.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom();var f=this.markerClusterer_.getMaxZoom();if(f&&e>f){for(var c=0,a;a=this.markers_[c];c++){a.setMap(this.map_)}return}if(this.markers_.length<this.minClusterSize_){this.clusterIcon_.hide();return}var d=this.markerClusterer_.getStyles().length;var b=this.markerClusterer_.getCalculator()(this.markers_,d);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.setSums(b);this.clusterIcon_.show()};function ClusterIcon(a,c,b){a.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.styles_=c;this.padding_=b||0;this.cluster_=a;this.center_=null;this.map_=a.getMap();this.div_=null;this.sums_=null;this.visible_=false;this.setMap(this.map_)}ClusterIcon.prototype.triggerClusterClick=function(b){var a=this.cluster_.getMarkerClusterer();google.maps.event.trigger(a,"clusterclick",this.cluster_,b);if(a.isZoomOnClick()){this.map_.fitBounds(this.cluster_.getBounds())}};ClusterIcon.prototype.onAdd=function(){this.div_=document.createElement("DIV");if(this.visible_){var d=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(d);this.div_.innerHTML=this.sums_.text}var b=this.getPanes();b.overlayMouseTarget.appendChild(this.div_);var c=this;var a=false;google.maps.event.addDomListener(this.div_,"click",function(e){if(!a){c.triggerClusterClick(e)}});google.maps.event.addDomListener(this.div_,"mousedown",function(){a=false});google.maps.event.addDomListener(this.div_,"mousemove",function(){a=true})};ClusterIcon.prototype.getPosFromLatLng_=function(b){var a=this.getProjection().fromLatLngToDivPixel(b);if(typeof this.iconAnchor_==="object"&&this.iconAnchor_.length===2){a.x-=this.iconAnchor_[0];a.y-=this.iconAnchor_[1]}else{a.x-=parseInt(this.width_/2,10);a.y-=parseInt(this.height_/2,10)}return a};ClusterIcon.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px";this.div_.style.left=a.x+"px"}};ClusterIcon.prototype.hide=function(){if(this.div_){this.div_.style.display="none"}this.visible_=false};ClusterIcon.prototype.show=function(){if(this.div_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a);this.div_.style.display=""}this.visible_=true};ClusterIcon.prototype.remove=function(){this.setMap(null)};ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();this.div_.parentNode.removeChild(this.div_);this.div_=null}};ClusterIcon.prototype.setSums=function(a){this.sums_=a;this.text_=a.text;this.index_=a.index;if(this.div_){this.div_.innerHTML=a.text}this.useStyle()};ClusterIcon.prototype.useStyle=function(){var a=Math.max(0,this.sums_.index-1);a=Math.min(this.styles_.length-1,a);var b=this.styles_[a];this.url_=b.url;this.height_=b.height;this.width_=b.width;this.textColor_=b.textColor;this.anchor_=b.anchor;this.textSize_=b.textSize;this.backgroundPosition_=b.backgroundPosition;this.iconAnchor_=b.iconAnchor};ClusterIcon.prototype.setCenter=function(a){this.center_=a};ClusterIcon.prototype.createCss=function(e){var d=[];d.push("background-image:url("+this.url_+");");var b=this.backgroundPosition_?this.backgroundPosition_:"0 0";d.push("background-position:"+b+";");if(typeof this.anchor_==="object"){if(typeof this.anchor_[0]==="number"&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){d.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;")}else{if(typeof this.anchor_[0]==="number"&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_){d.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;")}else{d.push("height:"+this.height_+"px; line-height:"+this.height_+"px;")}}if(typeof this.anchor_[1]==="number"&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){d.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;")}else{d.push("width:"+this.width_+"px; text-align:center;")}}else{d.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;")}var a=this.textColor_?this.textColor_:"black";var c=this.textSize_?this.textSize_:11;d.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+a+"; position:absolute; font-size:"+c+"px; font-family:Arial,sans-serif; font-weight:bold");return d.join("")};window.MarkerClusterer=MarkerClusterer;MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker;MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers;MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers;MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers;MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator;MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize;MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds;MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap;MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers;MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom;MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles;MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters;MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers;MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw;MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker;MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers;MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport;MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint;MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator;MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize;MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom;MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd;MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw;Cluster.prototype.getCenter=Cluster.prototype.getCenter;Cluster.prototype.getSize=Cluster.prototype.getSize;Cluster.prototype.getMarkers=Cluster.prototype.getMarkers;ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd;ClusterIcon.prototype.draw=ClusterIcon.prototype.draw;ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove;